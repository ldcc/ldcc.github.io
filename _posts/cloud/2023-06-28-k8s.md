---
layout: post
title: Kubernetes 入门
categories: cloud
tags: k8s docker
date: 2023-05-12
hide: true
---

怎么感觉现在做个啥都要用

{% include brline %}

## Kubernetes 对象

### spec 与 status

Kubernetes 对象是一种 __意向表达（Record of Intent）__，一旦创建了某个对象，本质上是在告知 Kubernetes 系统集群工作负载状态看起来应是什么样子的， 这就是所谓的 __期望状态（Desired State）__。

对象的期望状态正是由 spec 决定的，而 Status 描述了对象当前状态，在任何时刻，Kubernetes 控制平面都一直在积极地管理着对象的实际状态，以使之达成期望状态。

基于以上原理，在创建 Kubernetes 对象时，必须提供对象的 spec。

### 必须字段

Kubernetes 对象所对应的 .yaml 文件中，需要配置的字段都有如下：

- apiVersion - 创建该对象所使用的 Kubernetes API 的版本。
- kind - 对象的类别。
- metadata - 帮助唯一标识对象的一些数据，包括一个 name 字符串、UID 和可选的 namespace
- spec - 你所期望的该对象的状态。

对每个 Kubernetes 对象而言，spec 的格式都是不同的，包含了特定于该对象的嵌套字段。 Kubernetes API 参考可以帮助你找到想要使用 Kubernetes 创建的所有对象的规约格式。

例如，参阅 Pod API 参考文档中 spec 字段。 对于每个 Pod，其 .spec 字段设置了 Pod 及其期望状态（例如 Pod 中每个容器的容器镜像名称）。 另一个对象规约的例子是 StatefulSet API 中的 spec 字段。 对于 StatefulSet 而言，其 .spec 字段设置了 StatefulSet 及其期望状态。 在 StatefulSet 的 .spec 内，有一个为 Pod 对象提供的模板。 该模板描述了 StatefulSet 控制器为了满足 StatefulSet 规约而要创建的 Pod。 不同类型的对象可以有不同的 .status 信息。API 参考页面给出了 .status 字段的详细结构， 以及针对不同类型 API 对象的具体内容。
